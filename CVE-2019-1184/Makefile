# Axel '0vercl0k' Souchet - December 28 2019
TARGET = cve-2019-1184.exe

SOURCES = CVE-2019-1184.cc
CFLAGS = /O1 /nologo /ZI /W3 /D_AMD64_ /DWIN_X64 /sdl
LDFLAGS = /nologo /debug:full ole32.lib

all: $(TARGET) clean lowintegrity

$(TARGET): $(SOURCES)
    if not exist .\bin mkdir bin
    cl $(CFLAGS) /Febin\$@ $** /link $(LDFLAGS)

lowintegrity:
    icacls bin\$(TARGET) /setintegritylevel low

clean:
    del *.obj *.pdb vc*.idb
    if exist .\bin del bin\*.exp bin\*.ilk bin\*.lib
